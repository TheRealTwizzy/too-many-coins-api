<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Too Many Coins — Sign up</title>
	<style>
	body {
		font-family: system-ui, sans-serif;
		background: #0f1220;
		color: #eaeaf0;
		padding: 2rem;
		max-width: 720px;
		margin: 0 auto;
	}
	a { color: #c5cae9; text-decoration: none; }
	.card {
		border: 1px solid #2a2f55;
		padding: 1rem;
		border-radius: 10px;
		background: #141a2e;
	}
	.label { font-size: 0.85rem; color: #aaa; }
	input, button {
		background: #0f1220;
		border: 1px solid #2a2f55;
		color: #eaeaf0;
		padding: 0.5rem 0.75rem;
		border-radius: 8px;
		width: 100%;
		box-sizing: border-box;
	}
	button { cursor: pointer; margin-top: 0.5rem; }
	button.primary { background: #3b82f6; border-color: #3b82f6; }
	.stack { display: flex; flex-direction: column; gap: 0.75rem; }
	.toast { margin-top: 0.75rem; font-size: 0.85rem; color: #fecaca; }
	</style>
</head>
<body>
	<h1>Create account</h1>
	<p class="label">Alpha 1 · Accounts are local to this test.</p>
	<div class="card">
		<div class="stack">
			<input id="username" placeholder="Username" />
			<input id="display-name" placeholder="Display name" />
			<input id="password" type="password" placeholder="Password" />
			<button class="primary" id="signup-btn">Sign up</button>
			<div class="label"><a href="/">Back to login</a></div>
			<div id="toast" class="toast"></div>
		</div>
	</div>

	<script>
	async function apiFetch(url, options = {}) {
		return fetch(url, {
			...options,
			headers: {
				"Content-Type": "application/json",
				...(options.headers || {})
			},
			credentials: "include"
		});
	}

	document.getElementById("signup-btn").addEventListener("click", async () => {
		const username = document.getElementById("username").value;
		const password = document.getElementById("password").value;
		const displayName = document.getElementById("display-name").value;
		const res = await apiFetch("/auth/signup", {
			method: "POST",
			body: JSON.stringify({ username, password, displayName })
		});
		const data = await res.json();
		const toast = document.getElementById("toast");
		if (!data.ok) {
			toast.innerText = data.error || "Signup failed";
			return;
		}
		window.location.href = "/";
	});
	</script>
	<div class="label" style="margin-top:2rem; text-align:center;">Made by AI</div>
</body>
</html>